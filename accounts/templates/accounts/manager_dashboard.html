<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manager Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        /* Keep full sidebar for desktop */
        .sidebar {
            min-height: 100vh;
        }

        /* Hide mobile sidebar by default */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                width: 220px;
                height: 100%;
                background-color: #212529;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 1050;
                padding-top: 60px;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            /* Overlay behind sidebar */
            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 1040;
            }

            .overlay.active {
                display: block;
            }

            /* Hamburger button */
            .toggle-btn {
                position: fixed;
                top: 15px;
                left: 15px;
                z-index: 1100;
            }

            /* Adjust content spacing on small screens */
            .content {
                margin-top: 60px;
            }
        }
    </style>
</head>
<body class="bg-light">

    <!-- Toggle Button for Mobile -->
    <button class="btn btn-dark toggle-btn d-md-none" onclick="toggleSidebar()">☰</button>
    <div class="overlay" onclick="toggleSidebar()"></div>

    <div class="container-fluid">
        <div class="row">

            <!-- Sidebar -->
            <div class="col-md-2 bg-dark text-white p-3 sidebar">
                <h4 class="text-center">Manager Panel</h4>
                <hr class="bg-light">

                <a href="{% url 'create_tenant' %}" class="btn btn-success w-100 mb-3 sidebar-link">➕ Add Tenant</a>

                <ul class="nav flex-column">
                    <li class="nav-item"><a href="#" class="nav-link text-white sidebar-link">🏠 Dashboard</a></li>
                    <li class="nav-item"><a href="{% url 'house_list' %}" class="nav-link text-white sidebar-link">🏢 Apartments</a></li>
                    <li class="nav-item"><a href="{% url 'record_payment' %}" class="nav-link text-white sidebar-link">💳 Record Payment</a></li>
                    <li class="nav-item"><a href="#" class="nav-link text-white sidebar-link">💳 Payments</a></li>
                    <li class="nav-item"><a href="{% url 'manager_maintenance_requests' %}" class="nav-link text-white sidebar-link">🛠️ Maintenance</a></li>
                    <li class="nav-item"><a href="{% url 'manage_tenants' %}" class="nav-link text-white sidebar-link">👥 Manage Tenants</a></li>
                    <li class="nav-item"><a href="{% url 'edit_profile' %}" class="nav-link text-white sidebar-link">👤 Edit Profile</a></li>
                    <li class="nav-item"><a href="{% url 'password_change' %}" class="nav-link text-white sidebar-link">🔐 Change Password</a></li>
                </ul>

                <hr class="bg-light">
                <a href="{% url 'logout' %}" class="btn btn-danger w-100 sidebar-link">Logout</a>
            </div>

            <!-- Main Content -->
            <div class="col-md-10 p-4 content">
                <div class="row g-3">

                    <!-- Each card automatically resizes on mobile -->
                    <div class="col-12 col-sm-6 col-md-3">
                        <div class="card text-center shadow">
                            <div class="card-body">
                                <h5 class="card-title">👥 Tenants</h5>
                                <p class="card-text">Manage tenant details</p>
                                <a href="{% url 'manage_tenants' %}" class="btn btn-primary">View</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-sm-6 col-md-3">
                        <div class="card text-center shadow">
                            <div class="card-body">
                                <h5 class="card-title">🏢 Apartments</h5>
                                <p class="card-text">View & assign apartments</p>
                                <a href="{% url 'house_list' %}" class="btn btn-primary">View</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-sm-6 col-md-3">
                        <div class="card text-center shadow">
                            <div class="card-body">
                                <h5 class="card-title">💳 Payments</h5>
                                <p class="card-text">Track payments & service charges</p>
                                <a href="#" class="btn btn-primary">View</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-sm-6 col-md-3">
                        <div class="card text-center shadow">
                            <div class="card-body">
                                <h5 class="card-title">🛠️ Maintenance Requests</h5>
                                <p class="card-text">Check tenant issues</p>
                                <a href="{% url 'manager_maintenance_requests' %}" class="btn btn-primary">View</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-sm-6 col-md-3">
                        <div class="card text-center shadow border-info">
                            <div class="card-body">
                                <h5 class="card-title">🏗️ General Maintenance</h5>
                                <p class="card-text">Lift, lighting, shared area repairs</p>
                                <a href="{% url 'general_maintenance_manager' %}" class="btn btn-info text-white">View</a>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <script>
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.querySelector('.overlay');

        function toggleSidebar() {
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        // Auto-close sidebar on link click (mobile)
        document.querySelectorAll('.sidebar-link').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 768) toggleSidebar();
            });
        });
    </script>

</body>
</html>
